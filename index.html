<!doctype html>
<html class="no-js">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<link rel="preload" as="font" crossorigin="anonymous" type="font/ttf" href="https://usernamenotavailable12.github.io/Font-Repository/NotoSansAmbassadori-Bold.ttf">
<style>
    body:has(.container .jack) {
        margin: 0 !important;
        padding: 0 !important;
    }
    .container {
        display: -ms-flexbox;
        display: flex;
        -ms-flex-align: center;
        align-items: center;
        background: rgb(0,0,0,0);
        padding: 0px;
        border-radius:5px;
        background-size: cover;
        margin-left: 0rem;
        margin-right: 0rem;
        font-family: 'Noto Sans Ambassadori';
        font-weight: bold;
    }
    .container * {
        box-sizing: border-box;
    }
    .container .number-box .wrapper {
        padding: 6px 0px;
        padding-left: 5px;
        width: 100%;
        text-align: right;
    }
    .container .number-slider {
        display: -ms-flexbox;
        display: flex;
        -ms-flex-pack: justify;
        justify-content: space-between;
        -ms-flex-align: center;
        align-items: center;
    }
    .container .numbers {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        margin-top: -2px;
        gap: 100px;
    }
    .numbers--box {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 50px;
    }
    .container .numbers__item {
        width: 169px;
        height: 51px;
        display: flex;
        color: #ffffff;
        background-size: 100%;
        background-repeat: no-repeat;
        background-position: center;
    }
    .numbers__item.numbers__item--yvavi {
        background: linear-gradient(green,rgb(0, 58, 0),rgb(0, 26, 0));
        margin-right: 10px;
        border-radius: 5px;
        border: solid 2px #cf167c62;
    }
    .numbers__item.numbers__item--yvavi:nth-child(2) {
        background: linear-gradient(rgb(128, 0, 0),rgb(58, 0, 0),rgb(26, 0, 0));
        margin-right: 10px;
        border-radius: 5px;
    }
    .numbers__item.numbers__item--yvavi:nth-child(3) {
        background: linear-gradient(rgb(109, 128, 0),rgb(52, 58, 0),rgb(24, 26, 0));
        margin-right: 10px;
        border-radius: 5px;
    }
    .numbers__item.numbers__item--yvavi:nth-child(4) {
        background: linear-gradient(rgb(128, 73, 0),rgb(58, 33, 0),rgb(26, 14, 0));
        margin-right: 10px;
        border-radius: 5px;
    }
    .numbers__item.numbers__item--yvavi:nth-child(5) {
        background: linear-gradient(rgb(77, 0, 128),rgb(30, 0, 58),rgb(12, 0, 26));
        margin-right: 10px;
        border-radius: 5px;
    }
    .container .numbers__item .numbers__item--icon {
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .container .number__item--img {
        width: 90px;
    }
    .container .numbers__item-wrap {
        padding: 0 14px 0 14px;
        width: 100%;
        justify-content: center;
        display: flex;
        align-items: center;
        font-size: 12px;
    }
    .container .number-box {
        overflow: hidden;
        display: block;
        margin-top: 0px;
        font-size: 22px;
        line-height: 28px;
        width: auto;
        margin-right: -20px;
    }
    .container .number-box .jack {
        height: 29px;
        overflow: hidden;
        display: inline-block;
        position: relative;
        width: 7rem;
    }
    .jack>div {
        display: inline-block;
        margin-top: -86px;
        font-size: 15px;
    }
    .jack>div>span {
        display: block;
        font-family: 'Noto Sans Ambassadori';
        font-weight: bold;
    }
    .jack>div>span.dot {
        visibility: hidden;
        opacity: 0;
    }
    .jack>div.go {
        transform: translateY(-28px);
    }
    .jackpot-logo-amb-mob {
        display: none;
    }
    .jackpot-logo-amb-desk {
        display: block;
    }
    .jackpot-logo-amb-desk:is(img) {
        padding-left: 62px;
        padding-right: 62px;
        padding-top: 2px;
        padding-bottom: 2px;
    }
    .container .numbers__item-wrap h8 {
      display: flex;
      justify-content: start;
      align-items: start;
      padding-right: 7px;
      color: rgb(228, 228, 228);
    }
    .container .numbers__item-wrap {
      background: linear-gradient(120deg,rgb(0, 0, 0), transparent 60%);
    }
    .jack::after {
      content: 'â‚¾';
      font-size: 9px;
      padding-left: 3px;
    }
    .progeressive-jackpot-logo-desktop {
        display: flex;
        justify-content: center;
        align-items: center;
        padding-bottom: 10px;
      }
    @media (max-width: 1200px) {
      .container .numbers__item-wrap h8 {
        width: 50%;
        white-space: pre-wrap !important;
      }
      .numbers--box {
        gap: 10px;
    }
      .progeressive-jackpot-logo-desktop {
        display: none;
      }
        .container .numbers {
            flex-direction: column;
            gap: 10px;
            background: radial-gradient(rgb(58, 0, 32),black);
            border-radius: 5px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            padding-top: 10px;
            padding-bottom: 10px;
        }
        .container .number-box {
            margin-top: 0px;
            margin-right: -70px;
        }
        .container .numbers__item {
            width: 145px;
            height: 43px;
        }
        .container {
            margin-left: 10px !important;
            margin-right: 10px !important;
            padding: 0px;
            border: solid 1px rgb(207, 22, 125, 0.4);
            padding-top: 2px;
        }
        .jack>div {
            font-size: 10px;
        }
        .container .numbers__item-wrap h8 {
          font-size: 10px;
        }
        .jackpot-logo-amb-desk {
            display: none;
        }
        .jackpot-logo-amb-mob {
            display: none;
        }
        .container .numbers__item-wrap {
            padding: 0px 0px 0 0px;
        }
    }
    @media (min-width: 1200px) and (max-width: 1400px) {
        .container .numbers {
            flex-direction: row;
            gap: 80px;
        }
        .container .numbers__item {
            width: 189px;
            height: 51px;
        }
        .jack>div {
            font-size: 14px;
        }
    }
    @font-face {
        font-family: 'Noto Sans Ambassadori';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(https://usernamenotavailable12.github.io/Font-Repository/NotoSansAmbassadori-Bold.ttf);
    }
    @font-face {
        font-family: 'Noto Sans Ambassadori';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(https://usernamenotavailable12.github.io/Font-Repository/NotoSansAmbassadori-Bold.ttf);
    }
</style>
<div class="progeressive-jackpot-logo-desktop">
<img width="100px" src="https://images.takeshape.io/5da2b4d5-59f6-412a-82c3-f6a272b532be/dev/f8a10956-c06e-4e8c-9a40-590c9ffc46fe/progressive_badge.png?auto=format%2Ccompress">
</div>
<div class="container">
    <div class="numbers">
        <div class="numbers--box">
            <div class="numbers__item numbers__item--yvavi">
                <div class="numbers__item-wrap">
                    <h8>Versailles Gold</h8>
                    <div class="number-box">
                        <div id="wrapp_Versailles_Gold" class="jack"></div>
                    </div>
                </div>
            </div>
            <div class="numbers__item numbers__item--yvavi">
                <div class="numbers__item-wrap">
                    <h8>Burning Hot</h8>
                    <div class="number-box">
                        <div id="wrapp_Burning_Hot" class="jack"></div>
                    </div>
                </div>
            </div>
            <div class="numbers__item numbers__item--yvavi">
                <div class="numbers__item-wrap">
                    <h8>Rise of Ra</h8>
                    <div class="number-box">
                        <div id="wrapp_Rise_of_Ra" class="jack"></div>
                    </div>
                </div>
            </div>
            <div class="numbers__item numbers__item--yvavi">
                <div class="numbers__item-wrap">
                    <h8>40 Super Hot</h8>
                    <div class="number-box">
                        <div id="wrapp_40_Super_Hot" class="jack"></div>
                    </div>
                </div>
            </div>
            <div class="numbers__item numbers__item--yvavi">
                <div class="numbers__item-wrap">
                    <h8>20 Super Hot</h8>
                    <div class="number-box">
                        <div id="wrapp_20_Super_Hot" class="jack"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
const TIME_INTERVAL = 10;
const JSON_URI = 'https://ambassadoribetge-api-prod-bgsp.egt-ong.com/api/jackpot/stats';
let intervals = [];
let previousJackpots = {
    "Versailles Gold": 0,
    "Burning Hot": 0,
    "Rise of Ra": 0,
    "40 Super Hot": 0,
    "20 Super Hot": 0
};

syncJackpots();

setInterval(() => {
    syncJackpots();
}, TIME_INTERVAL * 1000);

function syncJackpots() {
    fetch(JSON_URI, { cache: 'no-cache' })
    .then(res => res.json())
    .then(data => {
        console.log('Data fetched:', data);

        intervals.forEach(interval => clearInterval(interval));
        intervals = [];

        const instances = data.jackpotInstancesStats.instanceStats;
        const currentJackpots = {};
        const wrap = {};
        const domArr = {};

        instances.forEach(instance => {
            const instanceName = instance.instanceName;
            const levelStats = instance.levelStats;

            if (!previousJackpots.hasOwnProperty(instanceName)) return;

            previousJackpots[instanceName] = getCurrentValue(levelStats, 1) || previousJackpots[instanceName];
            currentJackpots[instanceName] = getCurrentValue(levelStats, 1) || previousJackpots[instanceName];

            // Create or update DOM elements
            wrap[instanceName] = document.getElementById('wrapp_' + instanceName.replace(/\s+/g, '_'));
            if (wrap[instanceName]) {
                wrap[instanceName].innerHTML = '';
                domArr[instanceName] = [];

                createInitialDomElements(wrap, domArr, currentJackpots[instanceName], instanceName);

                const diffs = Object.keys(currentJackpots).map(name => currentJackpots[name] - previousJackpots[name]);
                const updateInterval = TIME_INTERVAL * 1000 / Math.max(...diffs);
                intervals.push(
                    setInterval(() => {
                        // Update the jackpot values periodically
                        // Ensure you are updating the DOM elements as needed
                    }, updateInterval)
                );
            }
        });
    });
}

function getCurrentValue(levelStats, levelId) {
    const level = levelStats.find(stat => stat.levelId === levelId);
    console.log('Level found:', level);
    if (level) {
        return parseInt(level.currentValue.find(value => value.key === 'GEL').value);
    } else {
        return 0;
    }
}

function createInitialDomElements(wrap, domArr, jackpot, instanceName) {
    const formattedJackpot = jackpot.toString().split('');
    formattedJackpot.forEach((number, numIndex) => {
        const numDom = document.createElement('div');
        numDom.innerHTML = parseInt(number);
        wrap[instanceName].appendChild(numDom);
        domArr[instanceName].push(numDom);

        if (((formattedJackpot.length - 3) - numIndex) % 3 === 0) {
            const numDomSeparator = document.createElement('div');
            const separator = formattedJackpot.length - 3 === numIndex ? '.' : ',';
            for (let i = 0; i < 3; i++) {
                const a = document.createElement('div');
                a.innerHTML = separator;
                numDomSeparator.appendChild(a);
            }
            wrap[instanceName].appendChild(numDomSeparator);
        }
    });
}
</script>
